{
	storage file_system /data
}

bandwidthmelbourne.com {
	handle_path /api/search* {
		reverse_proxy service-search:80
	}

	handle_path /api/* {
		reverse_proxy service-public:80
	}

	reverse_proxy website-main:3000
}

admin.bandwidthmelbourne.com {
	handle_path /api/search* {
		reverse_proxy service-search:80
	}

	handle_path /api/* {
		reverse_proxy service-admin:80
	}

	reverse_proxy website-admin:3000
}

auth.bandwidthmelbourne.com {
	reverse_proxy service-auth:8080
}

monitor.bandwidthmelbourne.com {
	reverse_proxy service-monitor:5000
}

127.0.0.1:8080 {
	respond "Health OK" 200
}
